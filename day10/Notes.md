## day10 Notes

### 面向对象

对象克隆
    
    1，什么是对象克隆
        在已有对象的基础上，创建一个新对象，并且两个对象的属性值不一样
        使用 clone关键字进行克隆
        
    2，实例：对象克隆的演示
    
    3,实例：魔术方法__clone()在克隆对象中的使用
    

对象遍历
    
    foreach 既可以遍历数组元素，也可以遍历对象属性
    
    foreach(数组或对象 as 下标或属性 => 数组元素值或对象属性值)
    {
        //输出结果数组元素的值，或对象属性的值
    }
    
常用魔术方法
    
    1，__toString()
        描述：将对象转成字符串时，__toString()会自动调用
        语法：public string __toString(void)
        注意：PHP不支持对象转字符串，因此，不能使用echo输出一个对象
        
    2，__invoke()
        描述：当把一个对象当成函数来调用时，__invoke()会自动调用
        语法：mixed__invoke([$..])

面向对象的设计模式
    
    1，什么是对象设计模式
        设计模式(design pattern)是一套被反复使用，多数人知晓，经过分类编目的
        代码设计经验的总结，使用设计模式是为了可重用代码，让代码更容易地被人理解，
        保证代码可靠性
    
    2，常用的设计模式有哪些
        单例设计模式：一个类只能创建一个实例对象，不管用什么方法都无法创建第2个对象
                    比如，数据库类
        工厂设计模式：生产不同类对象的工厂
        策略设计模式：定义一组算法，将每个算法都封装起来，并且使他们可以互相转换
        观察者设计模式：定义对象间一种一对多的依赖关系，使得每当一个对象改变状态
                    则所有依赖于它的对象都会得到通知并自动更新
    
    3，单例设计模式的要求(三私一公)
        一私：私有的静态的保存对象的属性
        一私：私有的构造方法，阻止类外new对象
        一私：私有的克隆方法，阻止类外clone对象
        一公：公共的静态的创建对象的方法
    
    4，实例：单例设计模式演示

总和案例：学生信息管理系统
    
    1，面向对象开发流程
        面向过程是以过程为中心的编程思想，面先对象是事务(对象)为中心的编程思想
        对象是专业对象，是一个功能方方面面的综合，例如：数据库对象，分页对象，图像处理等
        一个项目有若干个功能模块构成，包括：用户管理，新闻管理，产品管理，文章管理，学生管理等
        每个功能模块是一个对象：包括：用户对象，新闻对象，产品对象，文章对象，学生对象
        每个对象对应一个类：包括：用户类，新闻类，产品类，文章类，学生类
        当然，每个模块还有一些公共对象：数据库对象，分页对象，上传对象，图像处理，验证码对象等
    
    2,单例设计模式
    
    3，数据库工具类(Db.class.php)
    
    4，连接数据库的公共文件(conn.php)
    
    5,学生信息列表(./list.php)
    
    6,删除学生信息(./delete.php)
        删除函数 confirmDel(id)
        删除页面    delete.php
    
    7,创建分页类文件 ./Pager.class.php

工厂设计模式
    
    1，什么是工厂设计模式
        根据不同的类名参数，返回不同类的对象
        工厂模式，就是生产各种不同类的对象
        工厂模式：改变了在类外使用new关键字创建对象的方式，改成了在工厂类中创建
                类的对象
        在类的外部我们无法控制类的行为，但在类内部自己可以控制类的行为
    
    2，工厂设计模式的要求
        一般情况下，定义一个工厂类
        工厂类中的方法，应该就是公共的静态的方法
        该方法功能：就是根据传递的不同参数，去创建不同的类实例
    
    3，实例：创建不同形状类的对象
    
重载
    
    1，什么是重载
        1)其他编程语言中，面向对象的重载指的是，方法具有相同的名称，单是参数列表不同的
            情形，但PHP不支持同名函数或同名方法
        2)PHP所提供的重载(overloading)是指动态地创建类属性和方法，我们是通过
            魔术方法所实现的
        3)当调用当前环境下未定义或不可见的类属性或方法时，重载方法会被调用
        4)所有的重载方法都必须被声明为public
        5)属性重载只能在对象中进行，在静态方式中，这些魔术方法将不会被调用，
            所以这些方法都不能被声明为static
        6)这些魔术方法的参数都不能通过引用传递
    
    2，属性重载
        __get()魔术方法
            读取不可访问属性的值时，__get()会被调用
            public mixed __get(string $name)
        
        __set()魔术方法
            在给不可访问属性赋值时，__set()会被调用
            public void __set(string $name,mixed $value)
        
        __isset()魔术方法
            当对不可访问属性调用isset()或empty()时，__isset()会被调用

        __unset()魔术方法
            当对不可访问属性调用unset()时，__unset()会被调用
            public void __unset(string $name)
    
    3,方法重载
        __call()魔术方法
            在对象中调用一个不可访问方法时，__call()会被调用
            public mixed __call(string $name,array $arguments)
        
        __callStatic()魔术方法
            用静态方式中调用一个不可访问方法时，__callStatic()会被调用
            public mixed __callStatic(string $name,array $arguments)

变量序列化
    
    1，什么是变量序列化
        序列化是将变量转换为可保存或传输的字符串的过程
        反序列化就是在适当的时候把这个字符串在转化成原来的变量使用
        这两个过程结合起来，可以轻松地存储和传输数据，使程序更具维护性
        序列化有利于存储或传递PHP的值，同时不会丢失其类型和结构
        
        
    2，序列化函数serialize()
        产生一个可存储的值的表示
        string serialize(mixed $value)
        $value 可以是任何类型，除了资源外
        返回序列化之后的字符串，可以存储于任何地方
    
    3，反序列化函数unserialize()
        从已存储的表示中创建PHP的值
        mixed unserialize(string $str)
        对单一的已序列化的变量进行操作，将其转换回PHP的值
        
    4,对象序列化
        对象序列化过程，与其他变量数据一样
        对象序列化的内容只能包含成员属性
        当序列化对象时，serialize()函数会检查类中是否存在一个魔术方法__sleep()
           如果存在，该方法会先被调用，然后才执行序列化操作，此功能可以用于清理对象
           并返回一个包含对象中所有应被序列化的变量名称的数组
           
           魔术方法 __sleep()用来返回要序列化的对象属性的数组
           public function __sleep()
           {
            return array('db_host');
           }
           
           $str = serialize($obj)
           
    5，对象反序列化
        对象的反序列化过程，与其他变量数据一样
        当对象反序列化时，unserialize()函数会检查类中是否存在__wakeup()方法
            如果存在，则会先调用wakeup方法,预先准备对象需要的资源，__wakeup()经常
            用在反序列化操作中，进行一些初始化操作，例如重新建立数据库了解，或执行其他初始化操纵
            
            public function __wakeup()
            {
                $this->connectDb();//连接数据库
                $this->selectDb();//选择数据库
                $this->setCharset();//设置字符集
                
            }
            
            $str = file_get_contents('./2.txt');
            $db = unserialize($str);
            